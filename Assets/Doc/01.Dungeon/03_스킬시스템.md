# 스킬 시스템

## 개요
던전에서 사용하는 스킬은 액티브 스킬과 패시브 스킬로 구분됩니다. 플레이어는 스킬 타이밍을 제어할 수 있습니다.

---

## 스킬 분류

### 액티브 스킬 (Active Skills)
- **정의**: 플레이어 입력으로 발동하는 스킬
- **사용 조건**: 쿨타임 충족 + MP 충분
- **사용 방법**: 스킬 버튼 클릭 또는 자동 사용

### 패시브 스킬 (Passive Skills)
- **정의**: 항상 적용되는 영구 효과
- **발동 조건**: 없음 (항시 활성)
- **효과**: 스탯 증가, 특수 효과 등

---

## 액티브 스킬 시스템

### 스킬 쿨타임

#### 기본 쿨타임 계산
```
실제 쿨타임 = 기본 쿨타임 × (1 - 쿨타임 감소율)
```

#### 쿨타임 감소 요소
| 요소 | 효과 | 설명 |
|------|------|------|
| 후위 배치 | -15% | 후위 포지션 보너스 |
| 파티 시너지 | -5% ~ -20% | 특정 조합 보너스 |
| 장비 | -5% ~ -30% | 장비 옵션 |
| 버프 | -10% ~ -50% | 일시적 효과 |

#### 쿨타임 상한/하한
- **최소 쿨타임**: 기본 쿨타임의 30% (70% 감소 상한)
- **최대 쿨타임**: 기본 쿨타임의 200% (둔화 디버프)

### MP 소모

#### 기본 MP 소모 계산
```
실제 MP 소모 = 기본 MP 소모 × (1 - MP 효율)
```

#### MP 효율 증가 요소
| 요소 | 효과 | 설명 |
|------|------|------|
| 지능 스탯 | 지능 × 0.1% | 100 지능 = 10% 효율 |
| 정신 스탯 | 정신 × 0.05% | 100 정신 = 5% 효율 |
| 장비 | -10% ~ -40% | 장비 옵션 |
| 버프 | -20% ~ -50% | 일시적 효과 |

#### MP 소모 상한/하한
- **최소 MP 소모**: 기본 소모량의 10% (90% 효율 상한)
- **최대 MP 소모**: 기본 소모량의 200%

### 스킬 대상 선택

#### 타겟팅 타입
| 타입 | 설명 | 예시 |
|------|------|------|
| 단일 대상 | 적 1명 | 강타, 암살 |
| 다중 대상 | 적 N명 | 연쇄 공격 |
| 광역 | 범위 내 모든 적 | 폭발, 회오리 |
| 자신 | 시전자 자신 | 분노, 집중 |
| 아군 단일 | 아군 1명 | 치유, 축복 |
| 아군 전체 | 모든 아군 | 광역 치유, 사기 증진 |

#### 자동 타겟 우선순위
**적 대상**:
1. 보스/엘리트 유닛
2. 낮은 HP 적 (30% 이하)
3. 최전방 적
4. 랜덤

**아군 대상**:
1. 낮은 HP% 아군
2. 탱커 우선 (방어 스킬)
3. 딜러 우선 (버프 스킬)
4. 랜덤

---

## 스킬 효과 종류

### 직접 피해 (Direct Damage)
```
스킬 피해 = (공격력 × 스킬 계수) - (방어력 × 0.5)
최종 피해 = 스킬 피해 × (1 + 크리티컬) × (1 + 속성보너스)
```

**스킬 계수 범위**:
- 낮음: 150% ~ 200%
- 중간: 250% ~ 400%
- 높음: 500% ~ 800%
- 극딜: 1000% ~ 2000%

### 지속 피해 (DoT - Damage over Time)
```
틱당 피해 = 공격력 × DoT 계수
총 피해 = 틱당 피해 × (지속시간 / 틱 주기)
```

**DoT 예시**:
- 출혈: 2초마다 공격력의 30%, 10초간 (총 150%)
- 화염: 1초마다 공격력의 50%, 5초간 (총 250%)

### 치유 (Healing)
```
기본 치유량 = 지능 × 치유 계수 + 고정 치유량
최종 치유량 = 기본 치유량 × (1 + 치유 효율)
```

**치유 계수 범위**:
- 즉시 치유: 200% ~ 500%
- 지속 치유: 50% × 지속시간

### 버프 (Buff)
| 버프 타입 | 효과 | 지속시간 예시 |
|----------|------|---------------|
| 공격력 증가 | +20% ~ +100% | 10초 ~ 30초 |
| 방어력 증가 | +30% ~ +150% | 15초 ~ 60초 |
| 공격 속도 증가 | +20% ~ +50% | 10초 ~ 20초 |
| 크리티컬 확률 증가 | +10% ~ +30% | 15초 ~ 30초 |
| MP 회복 속도 증가 | +50% ~ +200% | 20초 ~ 60초 |

### 디버프 (Debuff)
| 디버프 타입 | 효과 | 지속시간 예시 |
|------------|------|---------------|
| 공격력 감소 | -20% ~ -50% | 8초 ~ 20초 |
| 방어력 감소 | -30% ~ -70% | 10초 ~ 25초 |
| 둔화 | -30% ~ -60% | 5초 ~ 15초 |
| 실명 | 적중률 -50% | 3초 ~ 10초 |
| 침묵 | 스킬 봉쇄 | 3초 ~ 8초 |

### 군중 제어 (Crowd Control)
| CC 타입 | 효과 | 지속시간 | 저항 가능 |
|---------|------|----------|----------|
| 기절 | 행동 불가 | 2초 ~ 5초 | 정신 |
| 빙결 | 행동 불가, 방어력 감소 | 3초 ~ 6초 | 신성 방어력 |
| 속박 | 이동 불가 | 4초 ~ 8초 | 민첩 |
| 공포 | 랜덤 이동 | 2초 ~ 4초 | 정신 |
| 석화 | 행동 불가, 방어력 대폭 증가 | 3초 ~ 10초 | 힘 |

---

## 스킬 레벨 시스템

### 스킬 레벨업
- **최대 레벨**: 10
- **레벨업 조건**: 스킬 포인트 소모
- **스킬 포인트 획득**: 부대장 레벨업 시 1포인트

### 레벨별 강화
```
레벨 1: 기본 효과
레벨 2-4: 계수 +10% / 레벨
레벨 5: 쿨타임 -10%, 계수 +10%
레벨 6-9: 계수 +15% / 레벨
레벨 10: 쿨타임 -20%, 계수 +20%, 추가 효과 해금
```

**레벨 10 추가 효과 예시**:
- 공격 스킬: 크리티컬 확률 +20%
- 치유 스킬: 대상 +1명
- 버프 스킬: 지속시간 +50%
- CC 스킬: 성공률 +20%

---

## 스킬 사용 모드

### 수동 모드 (Manual)
- **플레이어**: 스킬 버튼 직접 클릭
- **부대장**: 플레이어가 선택한 부대장의 스킬 발동
- **장점**: 전술적 타이밍 조절
- **단점**: 집중력 필요

### 자동 모드 (Auto)
- **AI 판단**: 쿨타임 충족 시 자동 발동
- **우선순위**: 고레벨 부대장 스킬 우선
- **장점**: 방치 가능
- **단점**: 최적화되지 않은 타이밍

### 세미 오토 (Semi-Auto)
- **기본**: 자동 전투
- **스킬**: 플레이어 수동 선택
- **장점**: 편의성 + 전술성 균형

---

## 스킬 슬롯 시스템

### 부대장별 스킬 슬롯
- **슬롯 1**: 레벨 1부터 사용 가능
- **슬롯 2**: 레벨 10 해금
- **슬롯 3**: 레벨 20 해금
- **슬롯 4**: 레벨 30 해금 (궁극기)

### 플레이어 스킬 슬롯
- **액티브 슬롯**: 6개
- **패시브 슬롯**: 4개
- **슬롯 변경**: 본거지에서만 가능

---

## 스킬 조합 시너지

### 연계 시스템
특정 스킬을 순서대로 사용 시 추가 효과:

**예시 1: 화염 연계**
```
화염구 → 화염 폭풍 → 용암 분출
효과: 마지막 스킬 피해 +100%
```

**예시 2: 약화 연계**
```
방어 감소 → 치명타 → 마무리 일격
효과: 치명타가 크리티컬 확정, 마무리 일격 피해 +200%
```

### 파티 시너지
같은 속성 스킬 3개 이상 사용 시:
- **화염**: 모든 적에게 화상 부여
- **냉기**: 모든 적 둔화 50%
- **신성**: 아군 전체 HP 회복

---

## 스킬 획득 방법

### 기본 스킬
- 부대장 고용 시 기본 제공
- 레벨업 시 자동 해금

### 희귀 스킬
- 던전 보상 (낮은 확률)
- 스킬북 아이템 사용
- 특정 퀘스트 완료

### 전설 스킬
- 고난이도 던전 클리어 보상
- 이벤트 보상
- 제작 (희귀 재료 필요)

---

## 스킬 쿨타임 표시

### UI 요소
- **쿨타임 원형 게이지**: 남은 시간 시각화
- **숫자 표시**: 정확한 초 단위 표시
- **준비 완료 알림**: 스킬 사용 가능 시 강조 표시

### 자동 사용 표시
- **자동 활성**: 스킬 아이콘 테두리 녹색
- **수동 모드**: 스킬 아이콘 테두리 기본색

---

## 스킬 밸런싱 원칙

### 쿨타임 vs 효과
```
짧은 쿨타임 (5초 이하): 낮은 효과 (150% ~ 250%)
중간 쿨타임 (10초 ~ 15초): 중간 효과 (300% ~ 500%)
긴 쿨타임 (20초 ~ 30초): 높은 효과 (600% ~ 1000%)
궁극기 (60초 이상): 극딜 (1500% ~ 3000%)
```

### MP 소모 vs 효과
```
낮은 소모 (10~30 MP): 기본 스킬
중간 소모 (40~70 MP): 주력 스킬
높은 소모 (80~150 MP): 강력한 스킬
극한 소모 (200+ MP): 궁극기
```

### 리스크 vs 보상
- **자해 스킬**: HP 소모하지만 높은 피해
- **지연 발동**: 캐스팅 시간 있지만 강력한 효과
- **조건부 스킬**: 특정 상황에서만 사용 가능하지만 극강 효과
